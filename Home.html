<!DOCTYPE html>
<html>

<head>
    	<title>My Drive</title>
        
  <link rel="icon" href="https://kevinjilissen.github.io/TheRev0lution/Google_Drive_logo.png" type="image/png">
  </head>
  
    <script type='text/javascript' src='https://api2.scaledrone.com/assets/scaledrone.min.js'></script>
    

<style>



body, input {
  font-size: 17px;
}

.message {
  margin: 5px 0;
}

.input-area {
  display: flex;
}

.input {
  width: 100%;
  line-height: 40px;
  border: 2px solid #C3C3C3;
  border-radius: 4px;
  padding: 0 15px;
}



.input.content {
  flex-grow: 1;
  margin-right: 0px;
}

.input.button {
  flex-basis: 100px;
  flex-grow: 0;
}








<!--  --><!--  --><!--  --><!--  -->





body {
	background-color: #292929;
	/* background-image: linear-gradient(red, yellow); */
	background-repeat: no-repeat, repeat;
    background-size: 100% 6000%;

}
#WarningCaps {display:none;color:red}

div[class = "message"]{
	color:white;
    transition: all 280ms ease-in-out;

    
    
}
div[class = "message"]:hover{
	color:red;
    transition: all 280ms ease-in-out;

    
    
    
}

div[type = "Chat"]{
  /*background-color: DodgerBlue;*/

  border-radius: 5px;
  position: relative;


  width:100%;
  height:200%;
  overflow: auto;
  padding: 5px;


}

#LogInPadding{
  background-color: DodgerBlue;
  background-image: linear-gradient(DodgerBlue, yellow);
  padding: 25px;
  text-align: center;
  text-transform: uppercase;
  /*letter-spacing: 5px;*/
  border-radius: 5px;
  position: fixed;

  left: 25%;
  bottom: 25%;
  width:50%;
  height:50%;
  box-shadow: 10px 10px rgba(53, 53, 53, 10);
}


#ShowOnLogin{

  visibility: hidden;
}
div[type=Alert]{
  background-color: white;
  box-shadow: -10px 0px yellow;

  color: black;
  
  padding: 20px;
  text-align: center;

  opacity: 0.8;
  filter: alpha(opacity=80); /* For IE8 and earlier */


}
.loginB {
	width:100%;
	border-radius: 25px;
    background-color: white;
  transition: 0.3s;

}
.loginB:hover {


  mix-blend-mode: screen; /* This makes the cutout text possible */


  backface-visibility: hidden;
  border: 1px solid rgba(#fff, 0);
  content: " ";
  display: block;
  position: relative;
  transition: all 280ms ease-in-out;
  text-shadow: 2px 2px 5px blue;

}
input[type=password] {
  width: 96%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  transition: all 280ms ease-in-out;
 
}
input[type=password]:hover {
  width: 100%;
  transition: all 280ms ease-in-out;
}


input[type=text] {
  width: 96%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  transition: all 280ms ease-in-out;

}
input[type=text]:hover {
  width: 100%;
  transition: all 280ms ease-in-out;
}


input[type=submit]{
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

#RemoveOnLogIn {

  
  text-align: center;

}

#extraOnLogin{
  position: absolute;
  right: 12px;
  bottom: 10px;



}

#extraOnLogin:hover{
  position: absolute;
  right: 12px;
  bottom: 10px;



}






</style>


<body id="body">




<div id="LogInPadding">
  <h2 id="RemoveOnLogIn"><b> <font face="verdana" color="white">Login:</b></h2> 
    <input type="text" class="input name" id = "localName" placeholder="Name.."><br>

  <input type="password"  name="pwd" id="pswrd"  maxlength="18" placeholder="Password.."><br><br>

  <input type="submit" id="RemoveOnLogIn" class="loginB slide" onclick="login()" value="Login">
  <p id = "attempts"></p>
  <p id="WarningCaps">WARNING! Caps lock is ON.</p>

</div>



<img class="Loader" id="extraOnLogin" src="https://kevinjilissen.github.io/TheRev0lution/Anon.png" width="200" height="200" alt="We are Ananimoose...">


  

  

 <div id="ShowOnLogin">
 
 
 <div type = "Alert">
 <h3>Warning:</h3>
 <p>This site is under construction</p>
 </div>
 <br>
 <br>
 <h3>About:</h3>
 <p>It is also a place where we anonomusly can put our ideas.</p>
 <br>
 <br>
 <h3>Chat:</h3>
 
 
 
 <div type = "Chat">
 	
 	
    <div class="text-area"></div>
      <form class="input-area" onsubmit="onSubmitForm(); return false;">
        <input type="text" class="input content" placeholder="Message..">
        <input type="submit" class="input button" value="Send">
        
      </form>
    </div>
 </div>
 
 
 </div>



<script>
  var Version = "0.0.2";
  var NextVersion = "0.0.3";
  var loading = true;



  var loggedIn = false;
  var passcode = /*"dGVzdA=="*/"YmFuYW5h";
  var adminCode = "d2luZHlsaWdodDEz";
  var attempts = 3;
  
  
  var userType;
  hideOnLoad();


  var rotDeg = 0;
  
  //while(rotDeg < 360){
    document.getElementById("extraOnLogin").style.transform = "rotate("+rotDeg+"deg)";
    rotDeg+=0.1;
  //}

  
  function hideOnLoad(){
  
  	//document.getElementById("ShowOnLogin").style.display = "none";
		document.getElementById("ShowOnLogin").hidden=true;
		//document.getElementById("FakeCode").height = 100+'px';
    //screen.height
  
  }

  
  function login() {
  
    

  
  
  
  	if(attempts > 0){
    	attempts--;
    }
    document.getElementById("attempts").innerHTML = attempts+" attempt(s) left";
    
    var input = document.getElementById("pswrd").value;
    var localName = document.getElementById("localName").value;

    //window.open("www.test.com");
    if(input == atob(passcode) && attempts > 0 || input == atob(adminCode) && attempts > 0){
    sendMessageToScaleDrone("[Server]", localName + " joined the server");
    	if(input == atob(adminCode)){
        	userType = "A";
        }
    	//further verification TODO
    	//alert('Creeper');
		//var person = prompt("Please enter your name", "Harry Potter");

        document.getElementById("pswrd").remove(); 
        document.getElementById("RemoveOnLogIn").remove(); 
		document.getElementById("ShowOnLogin").hidden=false;

    document.getElementById("extraOnLogin").hidden = true; 


    document.getElementById("ShowOnLogin").style.visibility="visible";
    document.getElementById("LogInPadding").hidden=true;
    document.getElementById("body").style.backgroundSize = "100% 400%";

                      

    }else if ("test" == input){
    	
    	window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";

    }


    //document.getElementById("pswrd").value = "Correct!";
	
	
  }
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
//tts  
function say(m) {
  var msg = new SpeechSynthesisUtterance();
  var voices = window.speechSynthesis.getVoices();
  msg.voice = voices[10];
  msg.voiceURI = "native";
  msg.volume = 10;
  msg.rate = 1;
  msg.pitch = 1.8;
  msg.text = m;
  msg.lang = 'en-US';
  speechSynthesis.speak(msg);
}
  
  
  
  
  
  
  
  
  
  
  
  //Chat Stuff
  
  var localName;
    var drone = new ScaleDrone('JOxaLWWctOB0GfdI');

drone.on('open', function (error) {
  if (error) return console.error(error);

  var room = drone.subscribe('Ananimoose');

  room.on('open', function (error) {
    if (error) return console.error(error);
    console.log('Connected to room');
  });

  room.on('data', addMessageToScreen);
});



drone.on('open', function (error) {
  if (error) return console.error(error);

  var room = drone.subscribe('general-chat');

  room.on('open', function (error) {
    if (error) return console.error(error);
    console.log('Connected to room');
  });

  room.on('data', addMessageToScreen);
});




function onSubmitForm(event) {
  var nameEl = document.querySelector('.input.name')
    , contentEl = document.querySelector('.input.content');
	localName = nameEl.value;
  if (nameEl.value && contentEl.value) {
    sendMessageToScaleDrone(nameEl.value, contentEl.value);
    contentEl.value = '';
  }
}
var mods = '';
function sendMessageToScaleDrone(name, content) {
//add modifigers
  if(localName == 'TestBot' && userType == "A"){
    mods = '&#129302;';
  }
  else if(userType == "A"){
  	mods = '&#128296   /?/s23d0/-=/3:2:3`~11';
  }

  
  mods = mods + Version;



  drone.publish({
    room: 'general-chat',
    message: {

      name: btoa(name+mods),
      content: btoa(content)
    }
  });
  mods = '';
}
function sendTyping(name) {
//not yet tested
  drone.publish({
    room: 'general-chat',
    message: {
      typingN: btoa(name)
    }
  });
}

function addMessageToScreen(message) {
  var div = document.createElement('div');
  var msgToAdd;
  var VisualName;
  var VisualContent;
  var MSGFromDev;

//decrypt  
      VisualName = '<b>' + atob(message.name) + '</b>: ';
    VisualContent = atob(message.content);
    
  var VisualSplit = VisualContent.split(" ");

  //Version reload if old
  if(VisualName.includes(NextVersion)){
	alert("You are running an old version, a new one is now availible. You will now Auto-Reload");
    location.reload(true);

  }
    var RemoveVerNum = VisualName.replace(Version, " ");
  	VisualName = RemoveVerNum;


//OP if name contains the secret code
  if(VisualName.includes("/?/s23d0/-=/3:2:3`~11")){
    var RemoveDevCode = VisualName.replace("/?/s23d0/-=/3:2:3`~11", " ");
  	VisualName = '<b>' + RemoveDevCode +'</b>';
    MSGFromDev = true;
  }
  


   
     //EMOJI STUFF
  if(VisualContent.includes(':)')){
    var SwapedMsg = VisualContent.replace(":)", "&#x1F600;");

    VisualContent = SwapedMsg;

  }
  if(VisualContent.includes(':P')){
    var SwapedMsg = VisualContent.replace(":P", "&#128523;");
    VisualContent = SwapedMsg;
  }
  if(VisualContent.includes(':|')){
    var SwapedMsg = VisualContent.replace(":|", "&#128528;");
    VisualContent = SwapedMsg;
  }
  if(VisualContent.includes('-_-')){
    var SwapedMsg = VisualContent.replace("-_-", "&#128529;");
    VisualContent = SwapedMsg;
  }
  if(VisualContent.includes(';)')){
    var SwapedMsg = VisualContent.replace(";)", "&#128521;");
    VisualContent = SwapedMsg;
  }
  if(VisualContent.includes(':fire:')){
    var SwapedMsg = VisualContent.replace(":fire:", "&#128293;");
    VisualContent = SwapedMsg;
  }  
  if(VisualContent.includes(':megaphone:')){
    var SwapedMsg = VisualContent.replace(":megaphone:", "&#128226;");
    VisualContent = SwapedMsg;
  }  
  if(VisualContent.includes(':poop:')){
    var SwapedMsg = VisualContent.replace(":poop:", "&#128169;");
    VisualContent = SwapedMsg;
  }  
  if(VisualContent.includes(':clap:')){
    var SwapedMsg = VisualContent.replace(":clap:", "&#128079;");
    VisualContent = SwapedMsg;
  }  
  if(VisualContent.includes(':thumbs_up:')){
    var SwapedMsg = VisualContent.replace(":thumbs_up:", "&#128077;");
    VisualContent = SwapedMsg;
  }   
  if(VisualContent.includes(':thumbs_down:')){
    var SwapedMsg = VisualContent.replace(":thumbs_down:", "&#128078;");
    VisualContent = SwapedMsg;
  }    
  if(VisualContent.includes(':medal:')){
    var SwapedMsg = VisualContent.replace(":medal:", "&#127941;");
    VisualContent = SwapedMsg;
  }  
  //
  //Commands
  
  if(VisualContent.includes('/ForceReloadAll') && MSGFromDev == true){

	location.reload(true);
	VisualContent = 'Update: reloading';


   }
   if(VisualContent.includes('/kick ') && MSGFromDev == true){
   		var removeExtras = VisualContent.replace("/kick "+VisualSplit[1], "");
        
            VisualContent = VisualContent + '<br> <b>TestBot</b> &#129302; : Kicked '+VisualSplit[1] + ' for '+removeExtras;
            
            
       if(VisualContent.includes('/kick '+localName) && MSGFromDev == true){
      location.reload(true);


     }
   }

   if(VisualContent.includes('/nick ')  && MSGFromDev == true){
   		var removeExtras = VisualContent.replace("/nick ", "");

   	    document.getElementById("localName").value = removeExtras;
   
   }
   
  if(VisualContent.includes('/DM')){
	    if(VisualContent.includes(" "+localName+" ")){
            var removecmd = VisualContent.replace("/DM", "");
            var removename = removecmd.replace(" "+localName+" ", "");

			VisualContent = "DM: "+removename;
			
		}else{
			VisualContent = 'Nothing to see here, this is a new feature. use /DM (name) (MSG)';
        }
   }   


   //TTS
   if(VisualContent.includes('/tts')){
		say(VisualContent);
		
	}

   if(VisualContent.includes('/help')){
   	    VisualName = "[Server]:";
   		if(userType == "A"){
   			VisualContent = "<br> /help <br>  /DM [Name(s)] [MSG] <br> --Admin Stuff-- <br> /tts (message) <br> /ForceReloadAll <br> /kick (name) (reason) <br> /nick (New Name)";

        }else{
   			VisualContent = "<br> /help <br>  /DM [Name(s)] [MSG] <br> ";
   		}
   }
  
  //URLS
  if(VisualContent.includes('http')){

    var split = VisualContent.split(" ");
    var ramMsg = '';
    for(var i = 0; i < split.length; i++){
		  if(split[i].includes('http')){
          	ramMsg += ramMsg + '<a href="'+split[i]+'">'+split[i]+'</a>';
          }else{
          	ramMsg += ramMsg + split[i];
          }
    }
    
    VisualContent = ramMsg;
    //VisualContent = 'LINK';

  }   
   
   
   

    
    
  msgToAdd = VisualName + VisualContent;
  div.innerHTML = msgToAdd;
  div.classList.add('message');
  document.querySelector('.text-area').appendChild(div);
  
  
  //autoScroll to bottom
	window.scrollTo(0, 100000000000);	
  
}



function addToDebugLog(item){

  var div = document.createElement('div');

  div.innerHTML = item;
  div.classList.add('DebugLog');
  document.querySelector('.text-area').appendChild(div);

}










      var input = document.getElementById("pswrd");
    var text = document.getElementById("WarningCaps");
input.addEventListener("keyup", function(event) {

if (event.getModifierState("CapsLock")) {
    text.style.display = "block";
  } else {
    text.style.display = "none"
  }
});

</script>

</body>
</html>
