<!DOCTYPE html>
<html>
  <head>
    <title>EEEEEEEEEEEEEEEE</title>
  </head>
  <body>
    <h1 id="encrypted"></h1>
    <p>Input field: <input type="text" id="encrypt" value="" /></p>
    <p>
      Code:
      <input
        type="text"
        id="code"
        value="Please Enable JavaScript"
      />
    </p>
    <p>Output field: <input type="text" id="output" value="" /></p>

    <button onclick="Encrypt()" id="encryptbtn">encrypt</button>
    <button onclick="Decrypt()" id="decryptbtn">decrypt</button>
  </body>

  <script>
    document.getElementById("code").value =
      "Jkh*dS%&9sz6tcasTs&\\nz1|a(cTD5ww<A&7}yz%Qvq?f!*>*HhSdqWlG4o_4B\\n55c:Il13`w+y4kxQuXv6~rR<$w{z!zcAzjSnbF>H0+1nmJO8vVd.imk~5+0C#e|k:Jw+TcrK09~cHk~M.%8*)3xb9#_>7~~8vr`UB:urd^rx$<R4i`ff)uCbAtkNrj05b{Gz{xBz<%>r(zW69<cx0et\\$2~mgnzm:)Q*ckg6OsCKDxxYL}D*|7#$4Eq$v~7r@|\\g<y8+^f(xzKRr0#^0(qw^pu@7nfi8(uiK*,,08j1Y<f`f^dzo\\L66*x01ANM`qy8o`gj0^Xb5sj+cd%3mn7+(e:20pGebaDx_48$}g{%i,#A5_jQ62z@g:jEefc6oW<vYc7pcn(s:,3hn3.ph$R)%hP8c@U%0e}>hMla@.Lct0!a#,XOn88|umTVxzp1N20YT`1&t|gel(@B{j{w~10msp4U!yH2}le|+wxfE>Dv{3:&&Xc<<__^Hel$g!s8asE?P`dv0Pctvq9h_cdlh3kF>LyM}035z}Z}$2dCXgcRh,>ul9xho8+{&_bzE)uS2`pfq|@V7&i20,PX7`,ej+8k.>mtVuy,Sr^0G9{4xb8.@tb63.:09mUZ9l)}j8x4No$ZQP5{?Bq9z1!Ni#~sa)^|v(i3!_!U.L>Fo&z,.82q^?:)8?p?o&#z}Z%tcC%J?)?8II#FkK7AwYxuO.?6W4WpaxyFO@xyV!_I(G@y#xwBo|ZImaqd2c*t)l5a*?1JxbiMz!8pgio";
    function Encrypt() {
      var x = document.getElementById("encrypt").value;
      var code = document.getElementById("code").value;
      //document.getElementById("output").value = encrypt(x, code);
      document.getElementById("output").value = encrypt(x, code);
      //
    }
    function Decrypt() {
      var x = document.getElementById("output").value;
      var code = document.getElementById("code").value;
      document.getElementById("encrypt").value = decrypt(x, code);
    }
    function getSubstringCount(input, lookingFor) {
      var amt = 0;
      for (let i = 0; i < input.length; i++) {
        const Char = input.charAt(i);
        if (Char == lookingFor) {
          amt++;
        }
      }

      return amt;
    }
    function getSubstringID(input, Char, num) {
      var Return = 0;
      var count = 0;
      for (let i = 0; i < input.length; i++) {
        if (input.charAt(i) == Char) {
          console.log(input.charAt(i) + "  " + Char);
          if (count - 1 < num) {
            Return = i;
            count++;
          }
        }
      }

      return Return;
    }

    function getRandomCharID(input, Char) {
      return getSubstringID(
        input,
        Char,
        Math.round(Math.random() * getSubstringCount(input, Char))
      );
    }

    function encrypt(input, key) {
      var output = "";

      for (var i = 0; i < input.length; i++) {
        //var seed = Math.round(Math.random());
        var index = key.indexOf(input.charAt(i));
        var index = getRandomCharID(key, input.charAt(i));
        //if (seed == 1) {
        //index = key.lastIndexOf(input.charAt(i));
        //}

        //output += input.charAt(i);
        output += index + " ";
      }
      return output;
    }
    function decrypt(input, key) {
      var output = "";
      var nums = input.split(" ");

      for (var i = 0; i < nums.length - 1; i++) {
        //var index = input.charAt(i);

        //output += input.charAt(i);
        output += key.charAt(nums[i]);
      }
      return output;
    }
  </script>
</html>
